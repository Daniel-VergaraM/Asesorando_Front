<div class="home-container">
  <!-- Sidebar Perfil -->
  <aside class="sidebar">
    <div class="profile-card p-4">
      <div class="avatar-wrapper mb-3">
        <img
          [src]="profesor.fotoUrl || 'assets/images/default-profile.jpg'"
          alt="Avatar"
          class="avatar-img"
        />
      </div>
      <h4 class="profile-name">{{ profesor.nombre }}</h4>
      <p class="text-muted small">{{ profesor.correo }}</p>
      <p class="text-muted small mb-4">📞 {{ profesor.telefono }}</p>
      <div class="actions d-flex flex-column gap-2">
        <button
          class="btn btn-primary btn-block"
          [routerLink]="['/profesor/actualizar', profesor.id]"
        >
          <i class="bi bi-pencil-fill me-2"></i>Editar Perfil
        </button>
        <button
          class="btn btn-outline-danger btn-block"
          [routerLink]="['/usuarios', 'borrar', profesor.id]"
          data-cy="btn-delete-user"
        >
          <i class="bi bi-trash-fill me-2"></i>Eliminar Cuenta
        </button>
      </div>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Solicitudes -->
    <section class="card-section">
      <header class="section-header">
        <h5>Solicitudes de Asesoría</h5>
        <button
          class="btn btn-sm btn-outline-light"
          (click)="ordenarSolicitudesPorDuracion()"
        >
          Filtrar por duración
        </button>
      </header>
      <ul class="list-requests">
        <li *ngFor="let s of asesorias; else: noRequests">
          <span
            >{{ s.tematica }} · {{ formatearDuracion(+s.duracion) }} ·
            {{ s.tipo }}</span
          >
          <button
            class="btn btn-sm btn-outline-secondary"
            class="btn btn-dark btn-sm"
            [routerLink]="['/asesorias/actualizar', s.id, profesor.id]"
          >
            <i class="bi bi-pencil-square"></i> Editar
          </button>
        </li>
      </ul>
      <footer class="section-footer">
        <span>Total de Asesorias: {{ asesorias.length }}</span>
        <button class="btn btn-sm btn-light">Refrescar</button>
      </footer>
      <ng-template #noRequests>
        <div class="empty-state">Sin solicitudes Existentes</div>
      </ng-template>
    </section>

    <!-- Historial -->
    <section class="card-section">
      <header class="section-header">
        <h5>Historial de Asesorías</h5>
        <button
          class="btn btn-sm btn-outline-light"
          [routerLink]="['/asesorias/create', profesor.id]"
        >
          Crear Asesoria
        </button>
      </header>
      <ng-container *ngIf="asesorias.length > 0; else noAsesorias">
        <div class="history-items">
          <article
            *ngFor="let a of asesorias | slice : 0 : 2"
            class="history-item"
          >
            <div class="badge-wrapper">
              <span
                class="badge"
                [ngClass]="a.completada ? 'badge-success' : 'badge-warning'"
              >
                {{ a.completada ? "Completa" : "Pendiente" }}
              </span>
            </div>
            <div class="history-content">
              <h6>{{ a.tipo }}</h6>
              <p class="small mb-1"><strong>Área:</strong> {{ a.area }}</p>
              <p class="small mb-1">
                <strong>Temática:</strong> {{ a.tematica }}
              </p>
              <p class="small mb-0">
                <strong>Duración:</strong> {{ a.duracion }} min
              </p>
            </div>
          </article>
        </div>
        <footer class="history-footer">
          <button
            class="btn btn-outline-secondary btn-sm"
            [routerLink]="['/asesorias/list', profesor.id]"
            class="btn btn-outline-dark"
          >
            Mostrar todas las asesorías
            <i class="bi bi-arrow-right ms-1"></i>
          </button>
        </footer>
      </ng-container>
      <ng-template #noAsesorias>
        <div class="alert alert-info">
          Este profesor no tiene asesorías registradas.
        </div>
      </ng-template>
    </section>
  </main>
</div>
